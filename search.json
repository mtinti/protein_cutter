[
  {
    "objectID": "core.html",
    "href": "core.html",
    "title": "core",
    "section": "",
    "text": "print(1)\n\n1\nsource",
    "crumbs": [
      "core"
    ]
  },
  {
    "objectID": "core.html#charge-logic-sequence-aware-drafted-not-implement",
    "href": "core.html#charge-logic-sequence-aware-drafted-not-implement",
    "title": "core",
    "section": "Charge logic (sequence-aware) Drafted / not Implement",
    "text": "Charge logic (sequence-aware) Drafted / not Implement\nFor each peptide: max_charge_seq = (#K + #R + #H) + 1 (N-terminus) max_charge = min(max_charge_seq, max_charge_cap) charges tested = [min_charge .. max_charge]\n\n\n\n\n\n\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\nsequence\nstr\n\n\n\n\nenzyme\nstr\ntrypsin_full\n\n\n\nmissed_cleavages\nint\n0\n\n\n\nmz_range\ntuple\n(200.0, 4000.0)\nMin/max m/z window to consider “identifiable”.\n\n\nmin_charge\nint\n1\nignore 1+ ?? yes for now\n\n\nmax_charge_cap\nint\n6\nGlobal practical cap on charge state (default 5).\n\n\nmin_pep_length\nint\n5\n\n\n\nmax_pep_length\nint\n52\n\n\n\nfixed_mods\ndict[str, float] | None\nNone\nResidue -&gt; new monoisotopic mass for that residue (fixed modification).Default is CAM on Cys: {‘C’: 160.0306}.\n\n\nfixed_mod_labels\ndict[str, str] | None\nNone\nResidue -&gt; Spectronaut-style label to insert into peptide string.Default is {‘C’: ‘Carbamidomethyl (C)’}.\n\n\nbasic_residues\nIterable\n(‘K’, ‘R’, ‘H’)\nResidues counted as basic for charge upper bound (default K,R,H).\n\n\nReturns\nset\n\ne.g., {“DVAGAVEFWTDR.2”, “DASGPAMTEIGEQPWGR.3”, …}\n\n\n\n\nsource\n\ncollapse_empai_entries\n\n collapse_empai_entries (empai_entries:set[str])\n\nCollapse Spectronaut-like PEPTIDE.z entries to stripped peptide sequences: - removes leading/trailing underscores - removes charge annotation - removes modification annotations in brackets\n\n#HMVLYFPATGNEPVVDGFFFVEGR\n\n\nsource\n\n\nfasta_to_peptide_set\n\n fasta_to_peptide_set (fasta_path:Union[str,pathlib.Path],\n                       enzyme:str='trypsin_full', missed_cleavages:int=0,\n                       min_pep_length:int=6, max_pep_length:int=52,\n                       show_progress:bool=True)\n\nDigest all proteins in a FASTA file and return unique peptide sequences.\nPerforms in silico digestion of every protein in a FASTA file and collects all resulting peptide sequences into a set. Useful for building canonical peptide databases, checking peptide detectability, or identifying novel peptides not present in reference proteomes.\n\n\n\n\n\n\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\nfasta_path\nUnion\n\nPath to the input FASTA file.\n\n\nenzyme\nstr\ntrypsin_full\nEnzyme name for digestion. Supported enzymes include trypsin,lysc, gluc, chymotrypsin, and others from pyteomics.Default is trypsin.\n\n\nmissed_cleavages\nint\n0\nNumber of allowed missed cleavage sites. Default is 0.\n\n\nmin_pep_length\nint\n6\nMinimum peptide length to include. Default is 5.\n\n\nmax_pep_length\nint\n52\nMaximum peptide length to include. Default is 52.\n\n\nshow_progress\nbool\nTrue\nDisplay progress bar during processing. Default is True.\n\n\nReturns\nset\n\nSet of unique peptide sequences from all digested proteins.\n\n\n\n\n#peptide_set\n\n\nsource\n\n\nflag_proprietary_peptides_from_set\n\n flag_proprietary_peptides_from_set (input_path:Union[str,pathlib.Path],\n                                     output_path:Union[str,pathlib.Path],\n                                     uniprot_peptides:set[str], sequence_c\n                                     ol:str='PEP.StrippedSequence',\n                                     new_col_name:str='is_novel',\n                                     sep:str=None,\n                                     show_progress:bool=True)\n\nFlag peptides as novel based on absence from a reference peptide set.\nReads a peptide report file and adds a boolean column indicating whether each peptide is novel (True) or canonical (False). A peptide is considered novel if it is NOT present in the provided reference set of UniProt or canonical peptides.\nThis function is useful for identifying proprietary ORF peptides that cannot be explained by known protein sequences, supporting evidence classification in proteomics workflows.\n\n\n\n\n\n\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\ninput_path\nUnion\n\nPath to input peptide file (TSV or CSV from Spectronaut or similar).\n\n\noutput_path\nUnion\n\nPath for output file with the new flag column added.\n\n\nuniprot_peptides\nset\n\nReference set of canonical peptide sequences. Peptides NOT inthis set are flagged as novel. Typically generated usingfasta_to_peptide_set on a UniProt FASTA file.\n\n\nsequence_col\nstr\nPEP.StrippedSequence\nColumn name containing peptide sequences.Default is PEP.StrippedSequence.\n\n\nnew_col_name\nstr\nis_novel\nName for the new boolean flag column. Default is is_novel.\n\n\nsep\nstr\nNone\nField separator. If None, auto-detects based on file extensionwhere .csv uses comma and other extensions use tab.\n\n\nshow_progress\nbool\nTrue\nDisplay progress bar during processing. Default is True.\n\n\nReturns\nint\n\nNumber of peptides processed.\n\n\n\n\nsource\n\n\nflag_proprietary_from_pg\n\n flag_proprietary_from_pg (input_path:Union[str,pathlib.Path],\n                           output_path:Union[str,pathlib.Path],\n                           accession_col:str='PG.ProteinAccessions',\n                           new_col_name:str='is_novel',\n                           uniprot_prefixes:tuple[str,...]=('&gt;fl', '&gt;sp'),\n                           keep_only_novel:bool=True, sep:str=None,\n                           show_progress:bool=True)\n\nFlag peptides as novel based on protein accession prefixes.\nReads a peptide report file and adds a boolean column indicating whether each entry maps exclusively to proprietary ORFs (True) or includes UniProt entries (False). Identification is based on checking if protein accessions contain UniProt prefixes like sp or fl.\nThis function is useful for identifying peptides that provide evidence specifically for novel or proprietary ORF discoveries rather than known UniProt sequences.\n\n\n\n\n\n\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\ninput_path\nUnion\n\nPath to input peptide file (TSV or CSV from Spectronaut or similar).\n\n\noutput_path\nUnion\n\nPath for output file with the new flag column added.\n\n\naccession_col\nstr\nPG.ProteinAccessions\nColumn name containing protein accessions.Default is PG.ProteinAccessions.\n\n\nnew_col_name\nstr\nis_novel\nName for the new boolean flag column. Default is is_novel.\n\n\nuniprot_prefixes\ntuple\n(‘&gt;fl’, ‘&gt;sp’)\nPrefixes identifying UniProt entries in accession strings.Default is (‘&gt;fl’, ‘&gt;sp’) for UniProt ORFs and Swiss-Prot entries.\n\n\nkeep_only_novel\nbool\nTrue\nIf True, only write rows where is_novel is True to output file.If False, write all rows with the flag column added.Default is False.\n\n\nsep\nstr\nNone\nField separator. If None, auto-detects based on file extensionwhere .csv uses comma and other extensions use tab.\n\n\nshow_progress\nbool\nTrue\nDisplay progress bar during processing. Default is True.\n\n\nReturns\ndict\n\nSummary statistics containing:- total: Total number of entries processed- proprietary_only: Entries mapping only to proprietary ORFs- has_uniprot: Entries with UniProt mappings- written: Number of lines written to output file\n\n\n\n\nres\n\n{'total': 10, 'proprietary_only': 9, 'has_uniprot': 1, 'written': 10}\n\n\n\nsource\n\n\nload_peptides_from_fasta\n\n load_peptides_from_fasta (fasta_path:Union[str,pathlib.Path],\n                           show_progress:bool=True)\n\nLoad unique peptide sequences from a FASTA file.\nThis function reads a FASTA-formatted file and returns all unique peptide sequences found in the file. Header lines (those starting with &gt; ) are ignored, and each non-empty sequence line is treated as a complete peptide.\n\n\n\n\n\n\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\nfasta_path\nUnion\n\nPath to the FASTA file containing peptide sequences.\n\n\nshow_progress\nbool\nTrue\nIf True, print progress messages indicating loading statusand the number of unique peptides loaded.\n\n\nReturns\nset\n\nA set containing unique peptide sequences extracted from theFASTA file.",
    "crumbs": [
      "core"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "protein_cutter",
    "section": "",
    "text": "This file will become your README and also the index of your documentation.",
    "crumbs": [
      "protein_cutter"
    ]
  },
  {
    "objectID": "index.html#developer-guide",
    "href": "index.html#developer-guide",
    "title": "protein_cutter",
    "section": "Developer Guide",
    "text": "Developer Guide\nIf you are new to using nbdev here are some useful pointers to get you started.\n\nInstall protein_cutter in Development mode\n# make sure protein_cutter package is installed in development mode\n$ pip install -e .\n\n# make changes under nbs/ directory\n# ...\n\n# compile to have changes apply to protein_cutter\n$ nbdev_prepare",
    "crumbs": [
      "protein_cutter"
    ]
  },
  {
    "objectID": "index.html#usage",
    "href": "index.html#usage",
    "title": "protein_cutter",
    "section": "Usage",
    "text": "Usage\n\nInstallation\n\n\nDocumentation\nDocumentation can be found hosted on this GitHub repository’s pages. Additionally you can find package manager specific guidelines on conda and pypi respectively.",
    "crumbs": [
      "protein_cutter"
    ]
  },
  {
    "objectID": "index.html#how-to-use",
    "href": "index.html#how-to-use",
    "title": "protein_cutter",
    "section": "How to use",
    "text": "How to use\nFill me in please! Don’t forget code examples:\n\n1+1\n\n2",
    "crumbs": [
      "protein_cutter"
    ]
  },
  {
    "objectID": "cli.html",
    "href": "cli.html",
    "title": "CLI",
    "section": "",
    "text": "source\n\nadd_pai_cli\n\n add_pai_cli (args=None)\n\nConsole entrypoint for add_pai.\n\n!add_pai \\\n--prot {TEST_DATA}'/pipeline_test/prot_report.tsv' \\\n--pep {TEST_DATA}'/pipeline_test/pep_report.tsv' \\\n--fasta {TEST_DATA}'/pipeline_test/prot.fa' \\\n--out {TEST_DATA}'/pipeline_test/prot_report_cli.tsv'\n\nRepo root: /Users/mtinti/git_projects/protein_cutter\nTest data dir: /Users/mtinti/git_projects/protein_cutter/test_data\nTest data exists: True\n/Users/mtinti/git_projects/protein_cutter/nbs\nRepo root: /Users/mtinti/git_projects/protein_cutter\nTest data dir: /Users/mtinti/git_projects/protein_cutter/test_data\nTest data exists: True\n{'min_pep_length': 6, 'max_pep_length': 52, 'min_mz_range': 200, 'max_mz_range': 4000, 'enzyme': 'trypsin_full', 'input_pep': 'test_spectronaut_pep_out.tsv', 'input_prot': 'test_spectronaut_prot_out.tsv', 'input_fasta': 'test_sequence.fa'}\n/Users/mtinti/git_projects/protein_cutter/nbs\nRepo root: /Users/mtinti/git_projects/protein_cutter\nTest data dir: /Users/mtinti/git_projects/protein_cutter/test_data\nTest data exists: True\n{'min_pep_length': 6, 'max_pep_length': 52, 'min_mz_range': 200, 'max_mz_range': 4000, 'enzyme': 'trypsin_full', 'input_pep': 'test_spectronaut_pep_out.tsv', 'input_prot': 'test_spectronaut_prot_out.tsv', 'input_fasta': 'test_sequence.fa'}\n/Users/mtinti/git_projects/protein_cutter/nbs\n\n\n\nsource\n\n\nflag_proprietary_from_pg_cli\n\n flag_proprietary_from_pg_cli (args=None)\n\nConsole entrypoint for flag_proprietary_from_pg.\n\n!flag_proprietary_from_pg \\\n--input {TEST_DATA}'/test_spectronaut_pep.tsv' \\\n--uniprot-prefixes '&gt;sp' \\\n--output {TEST_DATA}'/test_spectronaut_pep_annoated_cli.tsv'\n\nRepo root: /Users/mtinti/git_projects/protein_cutter\nTest data dir: /Users/mtinti/git_projects/protein_cutter/test_data\nTest data exists: True\n/Users/mtinti/git_projects/protein_cutter/nbs\nRepo root: /Users/mtinti/git_projects/protein_cutter\nTest data dir: /Users/mtinti/git_projects/protein_cutter/test_data\nTest data exists: True\n{'min_pep_length': 6, 'max_pep_length': 52, 'min_mz_range': 200, 'max_mz_range': 4000, 'enzyme': 'trypsin_full', 'input_pep': 'test_spectronaut_pep_out.tsv', 'input_prot': 'test_spectronaut_prot_out.tsv', 'input_fasta': 'test_sequence.fa'}\n/Users/mtinti/git_projects/protein_cutter/nbs\nRepo root: /Users/mtinti/git_projects/protein_cutter\nTest data dir: /Users/mtinti/git_projects/protein_cutter/test_data\nTest data exists: True\n{'min_pep_length': 6, 'max_pep_length': 52, 'min_mz_range': 200, 'max_mz_range': 4000, 'enzyme': 'trypsin_full', 'input_pep': 'test_spectronaut_pep_out.tsv', 'input_prot': 'test_spectronaut_prot_out.tsv', 'input_fasta': 'test_sequence.fa'}\nFlagging proprietary peptides: 10it [00:00, 73455.41it/s]\n\n\n\n!flag_proprietary_from_pg \\\n--input {TEST_DATA}'/test_spectronaut_pep.tsv' \\\n--uniprot-prefixes '&gt;sp' \\\n--keep-only-novel \\\n--output {TEST_DATA}'/test_spectronaut_pep_annoated_cli_only_novel.tsv'\n\nRepo root: /Users/mtinti/git_projects/protein_cutter\nTest data dir: /Users/mtinti/git_projects/protein_cutter/test_data\nTest data exists: True\n/Users/mtinti/git_projects/protein_cutter/nbs\nRepo root: /Users/mtinti/git_projects/protein_cutter\nTest data dir: /Users/mtinti/git_projects/protein_cutter/test_data\nTest data exists: True\n{'min_pep_length': 6, 'max_pep_length': 52, 'min_mz_range': 200, 'max_mz_range': 4000, 'enzyme': 'trypsin_full', 'input_pep': 'test_spectronaut_pep_out.tsv', 'input_prot': 'test_spectronaut_prot_out.tsv', 'input_fasta': 'test_sequence.fa'}\n/Users/mtinti/git_projects/protein_cutter/nbs\nRepo root: /Users/mtinti/git_projects/protein_cutter\nTest data dir: /Users/mtinti/git_projects/protein_cutter/test_data\nTest data exists: True\n{'min_pep_length': 6, 'max_pep_length': 52, 'min_mz_range': 200, 'max_mz_range': 4000, 'enzyme': 'trypsin_full', 'input_pep': 'test_spectronaut_pep_out.tsv', 'input_prot': 'test_spectronaut_prot_out.tsv', 'input_fasta': 'test_sequence.fa'}\nFlagging proprietary peptides: 10it [00:00, 47180.02it/s]\n\n\n\n!echo {TEST_DATA}\n\n/Users/mtinti/git_projects/protein_cutter/test_data\n\n\n\nprint(TEST_DATA)\n\n/Users/mtinti/git_projects/protein_cutter/test_data",
    "crumbs": [
      "CLI"
    ]
  },
  {
    "objectID": "pai.html",
    "href": "pai.html",
    "title": "PAI",
    "section": "",
    "text": "source\n\nget_observable\n\n get_observable (sequence:str, enzyme:str='trypsin_full')\n\nGet the set of observable peptides from in silico digestion.\nPerforms in silico digestion of a protein sequence and returns the set of theoretically observable peptides. This is used as the denominator (N_observable) in PAI and emPAI calculations.\n\n\n\n\n\n\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\nsequence\nstr\n\nProtein amino acid sequence to digest.\n\n\nenzyme\nstr\ntrypsin_full\nEnzyme name for in silico digestion. Must be a key inprotease_dict. Default is trypsin_full.\n\n\nReturns\nset\n\nSet of unique observable peptide sequences after digestionand filtering by m/z range.\n\n\n\n\nsource\n\n\nadd_pai\n\n add_pai (prot_df_path:Union[str,pathlib.Path],\n          pep_df_path:Union[str,pathlib.Path],\n          fasta_path:Union[str,pathlib.Path],\n          output_path:Union[str,pathlib.Path]=None,\n          pg_in_prot:str='PG.ProteinGroups',\n          pg_in_pep:str='PG.ProteinAccessions',\n          missed_cleavages_col:str='PEP.NrOfMissedCleavages',\n          pep_stripped_col:str='PEP.StrippedSequence',\n          enzyme:str='trypsin_full', filter_missed_cleavages:bool=True)\n\nCalculate Protein Abundance Index (PAI) for each protein group.\nComputes the ratio of observed peptides to observable peptides for each protein, providing a measure of sequence coverage that normalizes for protein size. This metric is useful for distinguishing between peptide-level and protein-level evidence in proteomics experiments.\n\n\n\n\n\n\n\n\n\n\nType\nDefault\nDetails\n\n\n\n\nprot_df_path\nUnion\n\nPath to protein-level report file (TSV format).\n\n\npep_df_path\nUnion\n\nPath to peptide-level report file (TSV format).\n\n\nfasta_path\nUnion\n\nPath to FASTA file containing protein sequences.\n\n\noutput_path\nUnion\nNone\nPath for output file. If None, appends ‘.pai’ before theextension of prot_df_path. Default is None.\n\n\npg_in_prot\nstr\nPG.ProteinGroups\nColumn name for protein groups in protein report.Default is PG.ProteinGroups.\n\n\npg_in_pep\nstr\nPG.ProteinAccessions\nColumn name for protein accessions in peptide report.Default is PG.ProteinAccessions.\n\n\nmissed_cleavages_col\nstr\nPEP.NrOfMissedCleavages\nColumn name for missed cleavages count in peptide report.Default is PEP.NrOfMissedCleavages.\n\n\npep_stripped_col\nstr\nPEP.StrippedSequence\nColumn name for stripped peptide sequences.Default is PEP.StrippedSequence.\n\n\nenzyme\nstr\ntrypsin_full\nEnzyme name for in silico digestion to calculate observablepeptides. Default is trypsin_full.\n\n\nfilter_missed_cleavages\nbool\nTrue\nIf True, only consider peptides with zero missed cleavagesfor observed count. Default is True.\n\n\nReturns\nDataFrame\n\nProtein report DataFrame with added pai column containingthe ratio of observed to observable peptides.\n\n\n\n\nadd_pai(prot_df_path = TEST_DATA/'pipeline_test/prot_report.tsv',\n    pep_df_path =  TEST_DATA/'pipeline_test/pep_report.tsv',\n    fasta_path = TEST_DATA/'pipeline_test/prot.fa')\n\n/Users/mtinti/git_projects/protein_cutter/nbs\n\n\n\n\n\n\n\n\n\n\nPG.ProteinGroups\n[1] 331_2022_GBR-Cell-34C-A.raw.PG.Quantity\n[2] 331_2022_GBR-Cell-34C-B.raw.PG.Quantity\n[3] 331_2022_GBR-Cell-34C-C.raw.PG.Quantity\n[4] 331_2022_GBR-Cell-37C-A.raw.PG.Quantity\n[5] 331_2022_GBR-Cell-37C-B.raw.PG.Quantity\n[6] 331_2022_GBR-Cell-37C-C.raw.PG.Quantity\n[7] 331_2022_GBR-Cell-40C-A.raw.PG.Quantity\n[8] 331_2022_GBR-Cell-40C-B.raw.PG.Quantity\n...\n[10] 331_2022_GBR-SN-34C-A.raw.PG.Quantity\n[11] 331_2022_GBR-SN-34C-B.raw.PG.Quantity\n[12] 331_2022_GBR-SN-34C-C.raw.PG.Quantity\n[13] 331_2022_GBR-SN-37C-A.raw.PG.Quantity\n[14] 331_2022_GBR-SN-37C-B.raw.PG.Quantity\n[15] 331_2022_GBR-SN-37C-C.raw.PG.Quantity\n[16] 331_2022_GBR-SN-40C-A.raw.PG.Quantity\n[17] 331_2022_GBR-SN-40C-B.raw.PG.Quantity\n[18] 331_2022_GBR-SN-40C-C.raw.PG.Quantity\npai\n\n\n\n\n0\n0\nTb427_000008800.1-p1\n551307.562500\n704164.562500\n748118.875000\n681518.625000\n703385.687500\n686961.1250\n816417.812500\n631893.750000\n...\n2.036847e+05\n189815.296875\n83305.46875\n2.046948e+05\n167546.3125\n117179.421875\n215901.4375\n273887.625\n135870.109375\n0.153846\n\n\n1\n29\nTb427_000198100.1-p1\n17201.074219\n22934.291016\n24707.408203\n20580.830078\n23038.123047\n24520.1875\n29426.867188\n28961.535156\n...\n1.619666e+06\n787221.187500\n106877.75000\n1.162788e+06\n311610.7500\n151712.437500\n565188.1875\n584564.250\n379278.843750\n0.318841\n\n\n\n\n2 rows × 21 columns\n\n\n\n\n# pipline\n# flag_proprietary_from_pg protein to filter out uniprots\n# flag_proprietary_from_pg peptide to filter out uniprots\n# load filtter prot and pep dataset\n# load fasta \n# add pai to protein group",
    "crumbs": [
      "PAI"
    ]
  }
]